<h3>Known clients</h3>
<ul>
    {% for key in dungeon.clients %}
    <li {% if (dungeon.clients[key].max_voltage - 0.05) > dungeon.clients[key].voltage %}
            style="color: red"
    {% endif %}>
        {{ dungeon.clients[key].gates }}: {{ dungeon.clients[key].voltage }}/{{dungeon.clients[key].max_voltage}}
    </li>
    {% endfor %}
</ul>

<h3>Data</h3>
<ul>
    {% for key in dungeon.data %}
    <li>{{ key }} => {{ dungeon.data[key].dist1 }} / {{ dungeon.data[key].dist2 }} @ {{ dungeon.data[key].time }} ... {{
        dungeon.data[key].voltage }}V
    </li>
    {% endfor %}
</ul>

<h3>State and History</h3>
{% if dungeon.game and dungeon.game.state %}
{{ dungeon.game.state.status() }}

<h5>State history</h5>
<a href="#" onclick="$.get('/rewind')">Rewind</a>
<table border="1">
{% for state in dungeon.game.stateHistory %}
    <tr>
        {% for gate in state.status() %}
        <td>{{ gate }}</td>
        {% endfor %}
    </tr>
{% endfor %}
</table>
<div class="container">
    {% for gate, data in dungeon.game.state.gates() %}
    <a href="#" onclick="$.get('/go/{{gate}}')">
        <i id="gate_{{ gate }}" class="my-icon {{ data['style'] }}"
           style="left: {{ data['x'] }}px; top: {{ data['y'] }}px"><i></i></i>
    </a>
    {% endfor %}
    <img src="static/map.png"/>
</div>
{% endif %}